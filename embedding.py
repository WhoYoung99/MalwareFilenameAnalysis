import numpy as np


def string_vector(string, clip):
    '''
    Turn each letter in a string into a list of ascii number
    clip: truncate too long string to uniform length,
          if string is shorter than clip number, padded with zeros
    '''
    string_to_int = np.array([ord(i) for i in string.lower()])
    string_to_int.resize(clip)
    return string_to_int

def string_embedding(string, clip=100):
    '''
    Convert each lettter of the string to a 8-bit vector
    Input: string
    Output: 8-bit vector with shape(clip, 8)
    '''
    arr = string_vector(string, clip)
    return np.array([tuple(map(int, tuple('{0:08b}'.format(i)))) for i in arr])

# import pandas as pd

# f = pd.Series(['sajdifl', 'sdfsdfsd', 'sdfsdf'])
# t = f.apply(lambda x:string_embedding(x, clip=15))
# print(type(t), t.shape)
# print(type(t[0]), t[0].shape)
# t = np.array([i for i in t])
# print(t.shape)